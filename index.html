<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TCP Photos</title>

  <!-- === CONFIGURATION (pre-filled for you) === -->
  <script>
    const GH_USER = '1oby';   // your GitHub username
    const GH_REPO = 'site';   // your repository name
    const PHOTOS_DIR = 'photos';              // folder containing images
    const CONTACT_EMAIL = 'you@example.com';  // your contact email
  </script>
  <!-- === END CONFIGURATION === -->

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@600&family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{--bg:#212121;--text:#e5e5e5;--muted:#a3a3a3;--line:#3a3a3a;--card:#262626}
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,Arial,Helvetica,sans-serif}
    a{color:inherit;text-decoration:none}
    .container{max-width:1300px;margin:0 auto;padding:0 20px}

    /* Header now STICKY (no overlap) */
    header{position:fixed; inset:0 0 auto 0; z-index:60; background:#1f1f1ff2; border-bottom:1px solid var(--line); backdrop-filter:saturate(120%) blur(6px)}
    .bar{height:64px;display:flex;align-items:center}
    nav a{margin-right:24px;font-weight:700;letter-spacing:.08em;text-transform:uppercase;opacity:.9}
    nav a:hover{opacity:1}
    .brand{position:absolute;left:50%;transform:translateX(-50%);font-family:Oswald,Impact,system-ui,sans-serif;letter-spacing:.12em;text-transform:uppercase;font-weight:700}
    .brand a{font-size:24px}
    .right{margin-left:auto;display:flex;gap:12px}

    /* Mobile header */
    .hamburger{display:none;appearance:none;background:none;border:0;padding:8px;margin-right:8px}
    .hamburger span{display:block;width:24px;height:2px;background:#fff;margin:5px 0}
    @media(max-width:780px){
      nav.desktop{display:none}
      .brand a{font-size:20px}
      .hamburger{display:block}
      .bar{height:auto;padding:10px 0}
    }

    /* Off-canvas menu */
    .drawer{position:fixed;inset:0 auto 0 0;width:260px;background:#1c1c1c;transform:translateX(-100%);transition:transform .25s ease;z-index:70;border-right:1px solid var(--line);padding:20px}
    .drawer a{display:block;padding:12px 4px;font-weight:700;text-transform:uppercase;letter-spacing:.08em;opacity:.95}
    .drawer.open{transform:none}
    .overlay{position:fixed;inset:0;background:#0008;opacity:0;pointer-events:none;transition:opacity .25s ease;z-index:65}
    .overlay.show{opacity:1;pointer-events:auto}

    /* Main spacing: small gap below header */
    main{padding-bottom:56px}
    footer{border-top:1px solid var(--line);color:var(--muted);padding:32px 0;text-align:center}

    /* Masonry: 3 across on desktop */
    .masonry{column-count:3; column-gap:20px}
    @media(max-width:1000px){.masonry{column-count:2; column-gap:18px}}
    @media(max-width:640px){.masonry{column-count:1; column-gap:16px}}
    .masonry-item{break-inside: avoid; display:inline-block; width:100%; margin:0 0 20px}

    /* Images: full image visible, with border */
    .photo{width:100%; height:auto; display:block; border:1px solid var(--line); border-radius:16px; background:#111}

    .btn{display:inline-flex;align-items:center;gap:.5rem;border:1px solid var(--line);background:#ffffff12;padding:.75rem 1.25rem;border-radius:14px;font-weight:600}
    .btn:hover{background:#ffffff22}
    .muted{color:var(--muted)}
    .hidden{display:none}
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
  </style>
</head>
<body>
  <!-- Drawer for mobile -->
  <div id="overlay" class="overlay"></div>
  <aside id="drawer" class="drawer">
    <a href="#/" onclick="closeDrawer()">Portfolio</a>
    <a href="#/about" onclick="closeDrawer()">About</a>
    <a href="#/contact" onclick="closeDrawer()">Contact</a>
    <hr style="border-color:var(--line);opacity:.4"/>
    <a href="https://www.instagram.com/tcp.photos/" target="_blank" rel="noreferrer">Instagram ↗</a>
  </aside>

  <header>
    <div class="container bar">
      <button class="hamburger" aria-label="Open menu" onclick="openDrawer()">
        <span></span><span></span><span></span>
      </button>
      <nav class="desktop">
        <a href="#/">Portfolio</a>
        <a href="#/about">About</a>
        <a href="#/contact">Contact</a>
      </nav>
      <div class="brand"><a href="#/">TCP Photos</a></div>
      <div class="right">
        <a href="https://www.instagram.com/tcp.photos/" target="_blank" rel="noreferrer" aria-label="Instagram">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="22" height="22" fill="#fff"><path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3z"/><path d="M12 7a5 5 0 1 1 0 10 5 5 0 0 1 0-10m0 2.2A2.8 2.8 0 1 0 14.8 12 2.8 2.8 0 0 0 12 9.2m5.5-3.1a1.1 1.1 0 1 1-1.1 1.1 1.1 1.1 0 0 1 1.1-1.1"/></svg>
        </a>
      </div>
    </div>
  </header>

  <main class="container">
    <!-- Portfolio -->
    <section id="page-portfolio">
      <h1 class="sr-only">Portfolio</h1>
      <p id="status" class="muted">Loading your gallery…</p>
      <ul id="grid" class="masonry hidden"></ul>
    </section>

    <!-- About -->
    <section id="page-about" class="hidden">
      <h1 style="font-size:32px;margin:0 0 12px">About TCP Photos</h1>
      <div style="display:grid;grid-template-columns:2fr 1fr;gap:24px;align-items:start">
        <p style="font-size:18px;line-height:1.6;opacity:.9">
          I capture authentic moments with a clean, cinematic style—portraits, events, and brand campaigns. Great light,
          honest stories, and attention to detail drive everything I shoot.
        </p>
        <div>
          <a class="btn" href="#/contact">Contact me</a>
        </div>
      </div>
    </section>

    <!-- Contact -->
    <section id="page-contact" class="hidden" style="max-width:640px">
      <h1 style="font-size:32px;margin-bottom:12px">Contact</h1>
      <form onsubmit="sendMail(event)">
        <div style="margin-bottom:12px">
          <label>Name</label><br />
          <input id="name" style="width:100%;padding:12px;border-radius:10px;border:1px solid var(--line);background:#262626;color:#fff" />
        </div>
        <div style="margin-bottom:12px">
          <label>Email</label><br />
          <input id="email" type="email" style="width:100%;padding:12px;border-radius:10px;border:1px solid var(--line);background:#262626;color:#fff" />
        </div>
        <div style="margin-bottom:16px">
          <label>Message</label><br />
          <textarea id="message" rows="6" style="width:100%;padding:12px;border-radius:10px;border:1px solid var(--line);background:#262626;color:#fff"></textarea>
        </div>
        <button class="btn" type="submit">Send email</button>
      </form>
    </section>
  </main>

  <footer>© <span id="year"></span> TCP Photos · All rights reserved</footer>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    // Ensure content never hides under the fixed header
    function setBodyOffset(){
      const h = document.querySelector('header').offsetHeight || 64;
      document.body.style.paddingTop = (h + 16) + 'px'; // 16px breathing room
    }
    window.addEventListener('load', setBodyOffset);
    window.addEventListener('resize', setBodyOffset);

    // Drawer controls (mobile)
    function openDrawer(){
      document.getElementById('drawer').classList.add('open');
      document.getElementById('overlay').classList.add('show');
      document.body.style.overflow = 'hidden';
      setBodyOffset();
    }
    function closeDrawer(){
      document.getElementById('drawer').classList.remove('open');
      document.getElementById('overlay').classList.remove('show');
      document.body.style.overflow = '';
      setBodyOffset();
    }
    window.openDrawer = openDrawer; window.closeDrawer = closeDrawer;
    document.getElementById('overlay').addEventListener('click', closeDrawer);

    // SPA routing (hash-based)
    function renderRoute(){
      const hash = window.location.hash || '#/'
      document.getElementById('page-portfolio').classList.toggle('hidden', hash !== '#/')
      document.getElementById('page-about').classList.toggle('hidden', hash !== '#/about')
      document.getElementById('page-contact').classList.toggle('hidden', hash !== '#/contact')
      if(hash === '#/') loadGallery()
      closeDrawer()
      setBodyOffset()
    }
    window.addEventListener('hashchange', renderRoute);

    function sendMail(e){
      e.preventDefault();
      const name = document.getElementById('name').value;
      const email = document.getElementById('email').value;
      const msg = document.getElementById('message').value;
      const subject = encodeURIComponent('New photography inquiry from ' + (name || '(no name)'));
      const body = encodeURIComponent('Name: ' + name + '\nEmail: ' + email + '\n\n' + msg);
      window.location.href = 'mailto:' + CONTACT_EMAIL + '?subject=' + subject + '&body=' + body;
    }

    let loaded = false;
    async function loadGallery(){
      if(loaded) return; // only once per load
      loaded = true;
      const status = document.getElementById('status');
      const grid = document.getElementById('grid');
      try{
        status.textContent = 'Loading your gallery…';
        const api = `https://api.github.com/repos/${GH_USER}/${GH_REPO}/contents/${PHOTOS_DIR}`;
        const res = await fetch(api, { headers: { 'Accept': 'application/vnd.github+json' }});
        if(!res.ok) throw new Error('GitHub API request failed: ' + res.status);
        const files = (await res.json()).filter(f => /\.(jpe?g|png|webp|gif)$/i.test(f.name));
        files.sort((a,b)=> a.name < b.name ? 1 : -1);
        if(files.length === 0){ status.textContent = 'No images found in /' + PHOTOS_DIR + ' yet.'; return; }

        const frag = document.createDocumentFragment();
        for(const f of files){
          const li = document.createElement('li');
          li.className = 'masonry-item';

          const a = document.createElement('a');
          a.href = f.download_url; a.target = '_blank'; a.rel = 'noreferrer';

          const img = document.createElement('img');
          img.className = 'photo';
          img.loading = 'lazy';
          img.alt = f.name.replace(/[_-]/g,' ').replace(/\.[^.]+$/,'');
          const cdn = `https://cdn.jsdelivr.net/gh/${GH_USER}/${GH_REPO}/${PHOTOS_DIR}/${encodeURIComponent(f.name)}`;
          img.src = cdn;

          a.appendChild(img);
          li.appendChild(a);
          frag.appendChild(li);
        }
        grid.appendChild(frag);
        status.classList.add('hidden');
        grid.classList.remove('hidden');
      }catch(err){
        console.error(err);
        status.textContent = 'Could not load photos from GitHub. Check repo name/visibility and that the photos folder exists.';
      }
    }

    if(!window.location.hash) window.location.hash = '#/';
    renderRoute();
  </script>
</body>
</html>
